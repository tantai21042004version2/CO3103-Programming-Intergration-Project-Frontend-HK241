<app-header></app-header>
<div class="detail-page-container">
    <div class="content-container">
        <div class="hero-container">
            <div class="hero-content">
                <div class="hero-header">
                    <div class="song-details">
                        <!-- N√∫t b·∫≠t/t·∫Øt ph√°t nh·∫°c -->
                        <button class="play-button" (click)="togglePlayPause(audioPlayer)">
                            {{ isPlaying ? "‚è∏" : "‚ñ∂" }}
                        </button>
                        <h2>{{ detailSong.name }}</h2>
                        <span class="artist-name">{{ artist.username }}</span>
                    </div>
                </div>
                <div class="meta-info">
                    <span class="time">{{ detailSong.release_date }}</span>
                    <span class="genre">{{ genre.name }}</span>
                </div>



                <div class="audio-player">

                    <!-- Tr√¨nh ph√°t nh·∫°c ·∫©n -->
                    <audio #audioPlayer [src]="detailSong.secure_url" (timeupdate)="updateProgress(audioPlayer)"
                        (ended)="onEnded(audioPlayer)" (canplaythrough)="onAudioReady()">
                    </audio>


                    <!-- Thanh ti·∫øn tr√¨nh -->
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress" [style.width.%]="(currentTime / duration) * 100"></div>
                        </div>
                        <div class="time-info">
                            <span>{{ formatTime(currentTime) }}</span>
                            <span>{{ formatTime(duration) }}</span>
                        </div>
                    </div>

                    <!-- Thanh ƒëi·ªÅu ch·ªânh √¢m l∆∞·ª£ng -->
                    <div class="volume-container">
                        <label for="volume-control">üîä</label>
                        <input id="volume-control" type="range" min="0" max="1" step="0.01" [value]="volume"
                            (input)="changeVolume(audioPlayer, $event)" />
                    </div>
                </div>
            </div>
            <div class="hero-image">
                <img [src]="detailSong.image_url" alt="Hero Image">
            </div>
        </div>

        <div class="listen-container">
            <!-- LEFT -->
            <div class="about-container">
                <!-- ABOVE LEFT -->
                <div class="comment-container">
                    <div class="comment-search-container">
                        <div class="user-avatar-container">
                            <img class="user-avatar" [src]="listener.image_url" alt="User Avatar">
                        </div>
                        <input class="comment-input" type="text" placeholder="Write a comment">
                        <button class="send-button">
                            <i class="send-icon">‚û§</i>
                        </button>
                    </div>
                    <div class="comment-button-container">
                        <div class="action-buttons">
                            <button class="action-button">‚ù§Ô∏è Like</button>
                            <button class="action-button">üîÅ Repost</button>
                            <button class="action-button">üì§ Share</button>
                            <button class="action-button">üîó Copy Link</button>
                            <button class="action-button">‚ûï Add to Next up</button>
                            <button class="action-button">‚ãØ More</button>
                        </div>
                        <div class="stats">
                            <span>‚ñ∂ 138K</span>
                            <span>‚ù§Ô∏è 2,905</span>
                            <span>üí¨ 43</span>
                        </div>
                    </div>
                </div>
                <!-- BELOW LEFT -->
                <div class="about-right-container">
                    <div class="user-detail-container">
                        <div class="user-card">
                            <div class="user-avatar">
                                <img [src]="artist.image_url" alt="User Avatar">
                            </div>
                            <div class="user-name">{{ artist.username }}</div>
                            <div class="user-stats">
                                <span class="user-votes">105</span>
                                <span class="user-posts">2</span>
                            </div>
                            <div class="user-follow-button-container">
                                <button class="follow-button">Follow</button>
                            </div>
                        </div>
                    </div>

                    <div class="comment-list-container">
                        <div class="list-header">
                            <span>93 comments</span>
                            <div class="sort-dropdown">
                                Sorted by: <select>
                                    <option value="newest">Newest</option>
                                    <option value="oldest">Oldest</option>
                                    <option value="most-liked">Most Liked</option>
                                </select>
                            </div>
                        </div>
                        <div class="list-body">
                            <div class="comment-card" *ngFor="let comment of comments">
                                <img [src]="comment.user.image_url" alt="Avatar" class="comment-avatar">
                                <div class="comment-content">
                                    <div class="comment-header">
                                        <span class="comment-author">{{ comment.user.username }}</span>
                                    </div>
                                    <div class="comment-text">{{ comment.content }}</div>
                                </div>
                                <div class="comment-likes">
                                    <span>0</span> ‚ù§Ô∏è
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- RIGHT -->
            <div class="sidebar-container">
                <div class="album-container">
                    <div class="related-header">
                        <span>RELATED TRACKS</span>
                        <a href="#">View all</a>
                    </div>
                    <div class="related-tracks">
                        <div class="track-item" *ngFor="let song of relatedSongs">
                            <img [src]="song.image_url" alt="Track Cover">
                            <div class="track-info">
                                <div class="track-title">{{ song.name }}</div>
                                <div class="track-name">{{ artist.username }} - {{ song.description }}</div>
                                <div class="track-stats">
                                    <span>195K</span>
                                    <span>4,823</span>
                                    <span>738</span>
                                    <span>827</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="like-container">
                    <div class="like-header">
                        <span class="like-count">2,905 LIKES</span>
                        <a href="#" class="view-all">View all</a>
                    </div>
                    <div class="like-body">
                        <div class="like-avatars">
                            <img src="https://via.placeholder.com/40" alt="Avatar">
                            <img src="https://via.placeholder.com/40" alt="Avatar">
                            <img src="https://via.placeholder.com/40" alt="Avatar">
                            <img src="https://via.placeholder.com/40" alt="Avatar">
                            <img src="https://via.placeholder.com/40" alt="Avatar">
                            <img src="https://via.placeholder.com/40" alt="Avatar">
                            <img src="https://via.placeholder.com/40" alt="Avatar">
                        </div>
                    </div>
                </div>
                <div class="share-container">
                    <div class="share-header">GO MOBILE</div>
                    <div class="app-links">
                        <a href="#" class="app-link">
                            <img src="https://via.placeholder.com/150x50?text=App+Store"
                                alt="Download on the App Store">
                        </a>
                        <a href="#" class="app-link">
                            <img src="https://via.placeholder.com/150x50?text=Google+Play" alt="Get it on Google Play">
                        </a>
                    </div>
                </div>
                <div class="footer-container">
                    <div class="footer-links">
                        <a href="#">Legal</a> -
                        <a href="#">Privacy</a> -
                        <a href="#">Cookie Policy</a> -
                        <a href="#">Cookie Manager</a> -
                        <a href="#">Imprint</a> -
                        <a href="#">Artist Resources</a> -
                        <a href="#">Blog</a> -
                        <a href="#">Charts</a> -
                        <a href="#">Transparency Reports</a>
                    </div>
                    <div class="footer-language">
                        Language: <a href="#">English (US)</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>